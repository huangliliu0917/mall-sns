<!--
  ~ 版权所有:杭州火图科技有限公司
  ~ 地址:浙江省杭州市滨江区西兴街道阡陌路智慧E谷B幢4楼
  ~
  ~ (c) Copyright Hangzhou Hot Technology Co., Ltd.
  ~ Floor 4,Block B,Wisdom E Valley,Qianmo Road,Binjiang District
  ~ 2013-2016. All rights reserved.
  -->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>用户详情</title>

    <link href="http://resali.huobanplus.com/cdn/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="http://resali.huobanplus.com/cdn/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="http://resali.huobanplus.com/cdn/hotui/css/animate.min.css" rel="stylesheet"/>
    <link href="../../css/style.min.css?v=4.0.0" rel="stylesheet"/>
</head>

<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight tooltip-demo" style="margin-top:30px;">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="tabs-container">
                    <ul class="nav nav-tabs">
                        <li class="active"><a href="javascript:orderListHandler.orderFilter(0);">基本信息</a></li>
                        <!--<li class=""><a href="javascript:void(0)">敬请期待</a></li>-->
                        <!--<li class=""><a href="javascript:void(0)">敬请期待</a></li>-->
                        <!--<li class=""><a href="javascript:void(0)">敬请期待</a></li>-->
                        <!--<li class=""><a href="javascript:void(0)">敬请期待</a></li>-->
                        <!--<li class=""><a href="javascript:void(0)">敬请期待</a></li>-->
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active">
                            <div class="panel-body">
                                <div class="wrapper wrapper-content">
                                    <div class="row animated fadeInRight">
                                        <div class="col-sm-4">
                                            <div class="ibox float-e-margins" style="border:1px solid #e7eaec">
                                                <div class="ibox-title">
                                                    <h5>个人资料</h5>
                                                </div>
                                                <div>
                                                    <div class="ibox-content no-padding border-left-right">
                                                        <img alt="image" class="img-responsive" src="../../img/user.png"
                                                             style="margin-left: 20px;margin-top: 5px;"
                                                             th:src="${imgURL}"/>
                                                    </div>
                                                    <div class="ibox-content profile-content">
                                                        <h5><strong>昵称</strong></h5>
                                                        <p th:text="${user.nickName}">天空飘来五个字</p>
                                                        <h5>
                                                            经验值
                                                        </h5>
                                                        <p th:text="${user.experience}">
                                                            1000
                                                        </p>
                                                        <h5>
                                                            注册时间
                                                        </h5>
                                                        <p th:text="${#calendars.format(user.createDate,'yyyy-MM-dd HH:mm:ss')}">
                                                            2014-08-11 11:20:30
                                                        </p>
                                                        <h5>等级</h5>
                                                        <p th:text="${user.level.name}">等级一</p>
                                                        <h5>身份</h5>
                                                        <p th:text="${authenticationType}">普通用户</p>

                                                        <div class="row m-t-lg">
                                                            <div class="col-sm-4">
                                                                <span class="bar">5,3,9,6,5,9,7,3,5,2</span>
                                                                <h5><strong th:text="${articleAmount}">169</strong> 文章
                                                                </h5>
                                                            </div>
                                                            <div class="col-sm-4">
                                                                <span class="line">5,3,9,6,5,9,7,3,5,2</span>
                                                                <h5><strong th:text="${userAmount}">28</strong> 关注</h5>
                                                            </div>
                                                            <div class="col-sm-4">
                                                                <span class="bar">5,3,2,-1,-3,-2,2,3,5,2</span>
                                                                <h5><strong th:text="${fansAmount}">240</strong> 粉丝</h5>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-8">
                                            <div class="ibox float-e-margins" style="border:1px solid #e7eaec">
                                                <div class="ibox-title">
                                                    <h5>用户标签</h5>
                                                    <div class="ibox-tools">
                                                        <a class="collapse-link">
                                                            <i class="fa fa-chevron-up"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="ibox-content">

                                                    <div>
                                                        <div class="feed-activity-list">
                                                            <button style="float:right" class="btn btn-success" type="button" onclick="page.addTags()" id="btnTags">添加标签</button>
                                                            <div id="tags">
                                                                <th:block th:each="item:${tags}">
                                                                    <div th:onclick="'page.deleteTags('+*{item.id} +',this)'" th:text="*{item.name}"></div>
                                                                </th:block>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="modal_tags">
    <div class="modal-dialog" style="width: 1000px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h4 class="modal-title">选择标签</h4>
            </div>
            <div class="modal-body" style="height: 600px;">
                <iframe id="frame_tags" width="100%" height="100%" frameborder="0"></iframe>
            </div>
            <div class="modal-footer">
                <button id="submitSelectTags" class="btn btn-success" type="button" onclick="page.submitSelectTags()" data-dismiss="modal">确定选择</button>
            </div>
        </div>
    </div>
</div>
<!--基础框架js-->
<script src="http://resali.huobanplus.com/cdn/jquery/2.2.4/jquery.min.js"></script>
<script src="http://resali.huobanplus.com/cdn/bootstrap/3.3.5/bootstrap.min.js"></script>
<script src="http://resali.huobanplus.com/cdn/hotui/js/content.min.js"></script>

<!--validate-->
<script src="http://resali.huobanplus.com/cdn/jquery-validation/1.15.0/jquery.validate.min.js"></script>
<script src="http://resali.huobanplus.com/cdn/jquery-validation/1.15.0/additional-methods.min.js"></script>
<script src="http://resali.huobanplus.com/cdn/jquery-validation/1.15.0/localization/messages_zh.min.js"></script>
<script src="../../js/bootstrap.hot.extra-validate.js"></script>

<script src="http://resali.huobanplus.com/cdn/hotui/js/plugins/peity/jquery.peity.min.js"></script>
<!--<script src="js/demo/peity-demo.min.js"></script>-->
<script type="text/javascript" src="http://tajs.qq.com/stats?sId=9051096" charset="UTF-8"></script>

<script src="../../js/bootstrap.hot.extra-utils.js"></script>
<script src="../../js/bootstrap.hot.extra-init.js"></script>


<script type="text/javascript" th:inline="javascript">
    var userId = /*[[${user.id}]]*/'0';
    var orderDocManager = {
        showConsignFlow: function () {
            var url = 'order_deliver.html';
            hot.iframeModal(url, '880px', '600px');
        }
    }

    var page = {};
    page.addTags = function () {
        $("#frame_tags").attr("src", "/top/tags/tagsList?extend=checkbox");
        $("#btnTags").attr("data-toggle", "modal");
        $("#btnTags").attr("data-target", "#modal_tags");
    };

    page.submitSelectTags = function () {
        var select = $("#frame_tags")[0].contentWindow.page.select();
        if (select.length > 0) {
            var selects = "";
            for (var i = 0; select.length > i; i++) {
                selects += select[i].id + ",";
            }
            selects = selects.substr(0, selects.length - 1);
            var request = {tagsType: 0, id: userId, tagsIds: selects};
            $.get("/top/tags/addTags", request, function (data) {
                $("#tags").html("");
                for (var i = 0; data.length > i; i++) {
                    $("#tags").append('<div onclick="deleteTags(' + data[i].id + ',this)">' + data[i].name + '</div>');
                }

                $("#submitSelectTags").attr("data-dismiss", "modal");

            });
        }
        else {
            $("#submitSelectTags").attr("data-dismiss", "modal");
        }
    }

    page.deleteTags = function (id, obj) {
        var request = {tagsType: 0, id: userId, tagsId: id};
        $.get("/top/tags/deleteTags", request, function (data) {
            if (data) $(obj).remove();
        });
    }
</script>
</body>

</html>

