<!DOCTYPE html>
<!--
  ~ 版权所有:杭州火图科技有限公司
  ~ 地址:浙江省杭州市滨江区西兴街道阡陌路智慧E谷B幢4楼
  ~
  ~ (c) Copyright Hangzhou Hot Technology Co., Ltd.
  ~ Floor 4,Block B,Wisdom E Valley,Qianmo Road,Binjiang District
  ~ 2013-2016. All rights reserved.
  -->

<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>


    <title>举报详情</title>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>

    <link href="http://resali.huobanplus.com/cdn/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="http://resali.huobanplus.com/cdn/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="http://resali.huobanplus.com/cdn/hotui/css/animate.min.css" rel="stylesheet"/>
    <link href="../../css/style.min.css" rel="stylesheet"/>
    <link href="../../css/layer.css" rel="stylesheet"/>

</head>

<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>编辑圈子</h5>
                </div>
                <div class="ibox-title">
                    <button onclick="history.go(-1)" class="btn btn-primary" type="button">返回</button>
                </div>
                <div class="ibox-content">
                    <!--/*@thymesVar id="circle" type="com.huotu.huobanplus.sns.entity.Circle"*/-->
                    <form method="post" class="form-horizontal" th:object="${model}">
                        <input type="hidden" name="reportId" th:value="*{reportId}"/>
                        <input type="hidden" name="reportedId" th:value="*{reportedId}"/>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">被举报者</label>

                            <div class="col-sm-2">
                                <label class="control-label" th:text="*{reportedName}">dsfasd</label>
                            </div>
                        </div>
                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">举报者</label>

                            <div class="col-sm-2">
                                <label class="control-label" th:text="*{reportName}">撒旦法大的</label>
                            </div>
                        </div>
                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">举报类型</label>

                            <div class="col-sm-2">
                                <label class="control-label" th:text="*{reportTargetType.name}">文章</label>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">说明</label>

                            <div class="col-sm-2">
                                <label class="control-label" th:text="*{content}">文章撒旦发生的法俄法啊刷大额发色发生</label>
                            </div>
                        </div>

                        <div th:if="*{reportTargetType.value==2}" class="hr-line-dashed"></div>
                        <div th:if="*{reportTargetType.value==2}" class="form-group">
                            <label class="col-sm-2 control-label">评论内容</label>

                            <div class="col-sm-2">
                                <label class="control-label" th:text="*{comment}">文章撒旦发生的法俄法啊刷大额发色发生</label>
                            </div>
                        </div>

                        <div th:if="*{reportTargetType.value==1}" class="hr-line-dashed"></div>
                        <div th:if="*{reportTargetType.value==1}" class="form-group">
                            <label class="col-sm-2 control-label">帖子标题</label>

                            <div class="col-sm-2">
                                <label class="control-label" th:text="*{invitationTitle}">文章撒旦发生的法俄法啊刷大额发色发生</label>
                            </div>
                        </div>

                        <div th:if="*{reportTargetType.value==1}" class="hr-line-dashed"></div>
                        <div th:if="*{reportTargetType.value==1}" class="form-group">
                            <label class="col-sm-2 control-label">帖子内容</label>

                            <div class="col-sm-2">
                                <label class="control-label" th:text="*{invitationContent}">文章撒旦发生的法俄法啊刷大额发色发生</label>
                            </div>
                        </div>


                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <div class="col-sm-4 col-sm-offset-2">
                                <button class="btn btn-primary" type="button"
                                        th:onclick="'reportConfig.showUser('+*{reportedId}+')'">查看用户</button>

                                <button th:text="*{Posting}?'禁止用户发帖':'恢复用户发帖'"
                                        th:onclick="'reportConfig.configPosting(this,'+*{reportedId}+')'"
                                        class="btn btn-white" type="button">禁止用户发帖</button>

                                <button th:text="*{speak}?'禁止用户发言':'恢复用户发言'"
                                        th:onclick="'reportConfig.configSpeak(this,'+*{reportedId}+')'"
                                        class="btn btn-white" type="button">禁止用户发言</button>

                                <button th:onclick="'reportConfig.editDel(this,'+*{invitationId}+')'"
                                        th:text="*{invitationEnabled}?'禁用帖子':'已禁用帖子'"
                                        th:if="*{reportTargetType.value==1}"
                                        class="btn btn-white" type="button">禁用帖子</button>

                                <button th:onclick="'reportConfig.modifyCommentStatus(this,'+*{commentId}+')'"
                                        th:if="*{reportTargetType.value==2}"
                                        th:text="*{commentStatus}==0?'禁用评论':'已禁用评论'"
                                        class="btn btn-white" type="button">禁用评论</button>
                            </div>
                        </div>


                    </form>
                </div>
            </div>
        </div>
    </div>
</div>



<script src="http://resali.huobanplus.com/cdn/jquery/2.2.4/jquery.min.js"></script>
<script src="http://resali.huobanplus.com/cdn/bootstrap/3.3.5/bootstrap.min.js"></script>
<script src="http://resali.huobanplus.com/cdn/hotui/js/content.min.js"></script>
<script src="http://resali.huobanplus.com/cdn/layer/2.4/layer.js"></script>

<script type="text/javascript" src="http://tajs.qq.com/stats?sId=9051096" charset="UTF-8"></script>
<script type="text/javascript" th:inline="javascript">
    /*<![CDATA[*/

    var reportConfig={};

    reportConfig.showUser=function(id){
        var userId=layer.open({
            type: 2,
            title: '查看用户',
            area: ['60%', '70%'],
            content:"/top/user/edit?userId="+id,
            end:function(){
            }
        });
    };

    //发言操作
    reportConfig.configSpeak=function(obj,id){
        var txt=$(obj).text();
        var status;
        var changeTxt;
        if(txt=='禁止用户发言'){
            status=0;
            changeTxt="恢复用户发言";

        }else {
            status=1;
            changeTxt="禁止用户发言";
        }
        reportConfig.forbidOperation(obj,id,1,status,changeTxt);


    };
    //发帖操作
    reportConfig.configPosting=function(obj,id){
        var txt=$(obj).text();
        var status;
        var changeTxt;
        if(txt=='禁止用户发帖'){
            status=0;
            changeTxt="恢复用户发帖";

        }else {
            status=1;
            changeTxt="禁止用户发帖";
        }
        reportConfig.forbidOperation(obj,id,0,status,changeTxt);
    };

    //禁止回复
    reportConfig.modifyCommentStatus=function(obj,id){
        var txt=$(obj).text();
        if(txt=='禁用评论'){
            layer.confirm('确定操作嘛？', {
                btn: ['确定','取消'] //按钮
            }, function(){
                var ld=layer.load(5, {shade: false});
                $.ajax({
                    type:'GET',
                    url: '/top/article/modifyCommentStatus',
                    dataType: 'json',
                    data:{id:id},
                    success:function(result){
                        layer.close(ld);
                        $(obj).text("已禁用评论");
                        layer.msg("修改成功");
                    },
                    error:function(e){
                        layer.close(ld);
                        layer.msg("修改失败！");
                    }
                });
            });
        }

    };


    //禁用帖子
    reportConfig.editDel = function (obj,id) {
        var txt=$(obj).text();
        var enabled=txt=='禁用帖子';
        if(!enabled){
            return;
        }
        layer.confirm('确定修改帖子嘛？', {
            btn: ['确定','取消'] //按钮
        }, function(){
            var ld=layer.load(5, {shade: false});
            $.ajax({
                type:'GET',
                url: '/top/article/deleteArticle',
                dataType: 'json',
                data: {id:id,enabled:!enabled},
                success:function(result){
                    layer.close(ld);
                    layer.msg("操作成功!");
                    $(obj).text(enabled?'已禁用帖子':'禁用帖子');
                },
                error:function(e){
                    layer.close(ld);
                    layer.msg("操作失败!");
                }
            });
        });
    }



    reportConfig.forbidOperation=function(obj,id,type,status,txt){

        layer.confirm('确定操作嘛？', {
            btn: ['确定','取消'] //按钮
        }, function(){
            var ld=layer.load(5, {shade: false});
            $.ajax({
                type:'GET',
                url: '/top/report/forbidOperation',
                dataType: 'json',
                data: {userId:id,type:type,status:status},
                success:function(result){
                    layer.close(ld);
                    layer.msg(result.message);
                    $(obj).text(txt);
                },
                error:function(e){
                    layer.close(ld);
                    layer.msg("操作失败!");
                }
            });
        });
    };

    /*]]>*/

</script>
</body>

</html>